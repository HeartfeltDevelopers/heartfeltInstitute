{% extends 'studentBase.html' %}
{% load static %}
{% block content %}

    <body>
        <style>
            #id_rootID{
                display: none;
            }
            #id_root{
                display: none;
            }
            label {
                display: none;
            }
            .custom-rounded {
                border-radius: 15px; /* Adjust this value as needed */
            }
            .extra-large-option {
                font-size: 1.5rem;  /* Adjust this value as per your requirement */
                padding: 10px 15px; /* Adjust padding if needed */
            }

        </style>
   
        <!-- Page Area Start Here -->
            <div class="dashboard-content-one">
                <div class="row">
                    <!-- Student Info Area Start Here -->
                    <div class="col-md-6 col-12">
                        <div class="card dashboard-card-ten">
                            <div class="card-body">
                                <div class="heading-layout1">
                                    <div class="item-title">
                                        <h3 class="item-title">{{user.first_name}} {{user.last_name}}</h3>
                                        <p>Student ID Number: <b>{{student_id}}</b></p>
                                    </div>
                                    <div class="dropdown">
                                        <a class="dropdown-toggle" href="#" role="button" data-toggle="dropdown"
                                            aria-expanded="false">...</a>

                                        <div class="dropdown-menu dropdown-menu-right">
                                            <a class="dropdown-item" href="#lesson_allocation" data-toggle="modal"><i
                                                class="fas fa-plus text-dark-pastel-green"></i>Add Course</a>
                                            <a class="dropdown-item" href="#member" data-toggle="modal"><i
                                                    class="fas fa-cogs text-orange-red"></i>Edit Profile</a>
                                            <a class="dropdown-item" href="#"><i
                                                    class="fas fa-redo-alt text-orange-peel"></i>Refresh</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row">
                                        <div class="table-responsive info-table{% if photo %} col-md-10{% else %} col-md-12{% endif %} col-12">
                                            <table class="table text-nowrap" >
                                                <tbody>
                                                    <tr>
                                                        <td>Church:</td>
                                                        <td class="font-medium text-dark-medium" style="text-transform: capitalize;">{{church_name}}</td>
                                                    </tr>
                                                
                                                    <tr>
                                                        <td>E-Mail:</td>
                                                        <td class="font-medium text-dark-medium">{{user.email}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Address:</td>
                                                        <td class="font-medium text-dark-medium">{{address}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Phone:</td>
                                                        <td class="font-medium text-dark-medium">{{phone}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>City:</td>
                                                        <td class="font-medium text-dark-medium" style="text-transform: capitalize;">{{city}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Country:</td>
                                                        <td class="font-medium text-dark-medium">{{country}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        {% if photo %}
                                        <div class=" col-md-2 text-center item-icon">
                                            <img src="{% static 'img/' %}{{photo}}"  width="100" alt="" class="custom-rounded">
                                        </div>
                                        {% endif %}
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Student Info Area End Here -->
                    {% if lesson_allocation %}
                    <!-- Notification Area Start Here -->
                    <div class="col-md-6 col-12">
                        <div class="card dashboard-card-six">
                            <div class="card-body">
                                <div class="heading-layout1 mg-b-17">
                                    <div class="item-title">
                                        <h3>Notifications</h3>
                                    </div>
                                    
                                </div>
                                <div class="notice-box-wrap">
                                    {% for rw in notification %}
                                        <div class="notice-list">
                                            <div class="post-date {{rw.notification_rating}}">{{rw.date}} : {{rw.student_class}}</div>
                                            <h6 class="notice-title"><a href="#">{{rw.notification_title}}</a></h6>
                                            <div class="entry-meta"> {{rw.lecturer}} <span></span></div>
                                        </div>
                                    {% endfor %}

                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Notification Area End Here -->
                    {% else %}
                    <div class="col-md-6 col-12">
                        <div class="">
                            <button type="submit"
                                class="btn btn-gradient-yellow btn-lg" style="text-transform: uppercase;">Enroll to class</button>
                        </div>
                    </div>
                    {% endif %}
                </div>
                {% if lesson_allocation %}
                <div class="row">
                    <div class="col-12-xxxl col-12">
                        <div class="row">
                            <!-- Exam Result Area Start Here -->
                             <div class="col-lg-12">
                                <div class="card dashboard-card-eleven">
                                    <div class="card-body">
                                        <div class="heading-layout1">
                                            <div class="item-title">
                                                <h3>Upcoming Classes</h3>
                                            </div>
                                            <div class="dropdown">
                                                <a class="dropdown-toggle" href="#" role="button" data-toggle="dropdown"
                                                    aria-expanded="false">...</a>

                                                <div class="dropdown-menu dropdown-menu-right">
                                                    <a class="dropdown-item" href="#"><i
                                                            class="fas fa-times text-orange-red"></i>Close</a>
                                                    <a class="dropdown-item" href="#"><i
                                                            class="fas fa-cogs text-dark-pastel-green"></i>Edit</a>
                                                    <a class="dropdown-item" href="#"><i
                                                            class="fas fa-redo-alt text-orange-peel"></i>Refresh</a>
                                                </div>
                                            </div>
                                        </div>
                                        {% if lesson_allocation %}
                                        <div class="table-box-wrap">
                                            <form class="search-form-box">
                                                <div class="row gutters-8">
                                                    <div class="col-lg-4 col-12 form-group">
                                                        <input type="text" placeholder="Search by Exam ..."
                                                            class="form-control">
                                                    </div>
                                                    <div class="col-lg-3 col-12 form-group">
                                                        <input type="text" placeholder="Search by Subject ..."
                                                            class="form-control">
                                                    </div>
                                                    <div class="col-lg-3 col-12 form-group">
                                                        <input type="text" placeholder="dd/mm/yyyy"
                                                            class="form-control">
                                                    </div>
                                                    <div class="col-lg-2 col-12 form-group">
                                                        <button type="submit"
                                                            class="fw-btn-fill btn-gradient-yellow">SEARCH</button>
                                                    </div>
                                                </div>
                                            </form>
                                            <div class="table-responsive result-table-box">
                                                <table class="table display data-table text-nowrap">
                                                    <thead>
                                                        <tr>
                                                            <th>
                                                                <div class="form-check">
                                                                    <input type="checkbox"
                                                                        class="form-check-input checkAll">
                                                                    <label class="form-check-label">Class Name</label>
                                                                </div>
                                                            </th>
                                                            <th>Title</th>
                                                            <th>Lesson Date</th>
                                                            <th>Lesson Start Date</th>
                                                            <th>Lesson End Start</th>
                                                            <th>Lecturer</th>
                                                            <th>Class Link</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        {% for rw in lesson_allocation %}
                                                        <tr>
                                                            <td>
                                                                <div class="form-check">
                                                                    <input type="checkbox" class="form-check-input">
                                                                    <label class="form-check-label">{{rw.course_name}}</label>
                                                                </div>
                                                            </td>
                                                            <td>{{rw.online_title}}</td>
                                                            <td>{{rw.lesson_date}}</td>
                                                            <td>{{rw.lesson_start_time}}</td>
                                                            <td>{{rw.lesson_end_time}}</td>
                                                            <td>{{rw.lecturer}}</td>
                                                            <td>
                                                                <div class="dropdown">
                                                                    {% if rw.lesson_date|date:"Y-m-d" < current_date|date:"Y-m-d" %}
                                                                        Expired
                                                                    {% else %}
                                                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                                                            <span class="flaticon-more-button-of-three-dots"></span>
                                                                        </a>
                                                                        <div class="dropdown-menu dropdown-menu-right">
                                                                            <a class="dropdown-item" href="{{rw.online_platform_link}}" target="_blank">{{rw.online_platform_link}}</a>
                                                                        </div>
                                                                    {% endif %}
                                                                </div>
                                                                
                                                            </td>
                                                        </tr>
                                                        {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        {% else %}
                                        <div style="min-height: 400px"> <a href="#lesson_allocation" data-toggle="modal"> You dont have upcoming lessons </a></div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div> 
                            <!-- Exam Result Area End Here -->
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        <!-- Modal -->
        <div class="modal right fade"  id="member"  tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header bg-light">
                        <h4>
                            Update Personal Information
                        </h4>
                        <button type="button" onclick="javascript:window.location.reload()" class="close" data-dismiss="modal" aria-hidden="true">Close</button>
                    </div>
                    <div class="modal-body">
                        <form  method="post" name="form"  action="" enctype="multipart/form-data">{% csrf_token %}
                        <div style="margin-bottom: 20px;">
                            {{form}}
                        </div>
                        <button type="submit" class="btn btn-outline-success btn-lg">Save</button>
                        </form>
                    </div>
                </div><!-- modal-content -->
            </div><!-- modal-dialog -->
        </div><!-- modal -->

        <!-- Modal -->
        <div class="modal right fade"  id="lesson_allocation"  tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header bg-light">
                        <h4>
                            Add Course
                        </h4>
                        <button type="button" onclick="javascript:window.location.reload()" class="close" data-dismiss="modal" aria-hidden="true">Close</button>
                    </div>
                    <div class="modal-body">
                        <form  method="post" name="lesson_allocation_creation_form"  action="" enctype="multipart/form-data">{% csrf_token %}
                        <div style="margin-bottom: 20px;">
                            <input type="hidden" value="{{request.user.id}}" name="student_root">
                            <select name="course" class="form-control">
                                {% for rw in courses %}
                                    <option value="{{rw.course_code}}">{{rw.course_title}}</option>
                                {% endfor %}
                            </select>
                            <select name="lecturer" class="form-control">
                                {% for rw in lecturer %}
                                    <option value="{{rw.first_name}} {{rw.last_name}}">{{rw.first_name}} {{rw.last_name}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <button type="submit" class="btn btn-outline-success btn-lg">Save</button>
                        </form>
                    </div>
                </div><!-- modal-content -->
            </div><!-- modal-dialog -->
        </div><!-- modal -->

       

{% endblock %}